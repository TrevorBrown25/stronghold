name: Supabase Activity Scheduler

on:
  schedule:
    - cron: "0 0 * * 0,3"
  workflow_dispatch:

jobs:
  send-http-request:
    runs-on: ubuntu-latest
    env:
      SITE_URL: ${{ vars.SITE_URL || format('https://{0}.github.io/{1}', github.repository_owner, github.event.repository.name) }}
    steps:
      - name: Ping Supabase activity endpoint
        run: |
          curl -sSf "${SITE_URL%/}/api/etc/supabase-activity-scheduler"
